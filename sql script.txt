CREATE DATABASE  `ppl` ;

#USER
CREATE TABLE `ppl`.`user` (
`uid` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
`user` VARCHAR(32) NOT NULL,
`pass` VARCHAR(64) NOT NULL,
`salt` VARCHAR(32) NOT NULL,
`mail` VARCHAR(64) NOT NULL,
`name` VARCHAR(32),
`bday` DATE,
`about` TEXT,
`share` VARCHAR(255),
`status` TINYINT UNSIGNED NOT NULL DEFAULT 0,
`activation_key` VARCHAR(32)
) ENGINE = MYISAM DEFAULT CHARSET=utf8;


CREATE DATABASE  `data` ;

#MEDIA HANDLER
CREATE TABLE  `data`.`handler` (
`id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
`uid` INT UNSIGNED NOT NULL,
`title` VARCHAR(128) NOT NULL,
`desc` VARCHAR(255),
`type` VARCHAR(8) NOT NULL,
`category` VARCHAR(16) NOT NULL,
`tags` VARCHAR(255),
`points` MEDIUMINT UNSIGNED NOT NULL DEFAULT 0,
`perm` TINYINT UNSIGNED NOT NULL DEFAULT 0,
`date` TIMESTAMP NOT NULL
#`img` VARCHAR(128)
#`log` VARCHAR(255)
) ENGINE = MYISAM DEFAULT CHARSET=utf8;


#VIDEO
CREATE TABLE  `data`.`video` (
`vid` BIGINT UNSIGNED NOT NULL ,
`part` TINYINT UNSIGNED DEFAULT 1,
`title` VARCHAR( 64 ) ,
`desc` VARCHAR( 2048 ) ,
`type` VARCHAR( 16 ) NOT NULL ,
`code` VARCHAR( 32 ) NOT NULL ,
`date` TIMESTAMP NOT NULL ,
`length` SMALLINT UNSIGNED,
PRIMARY KEY (  `vid` )
) ENGINE = MYISAM DEFAULT CHARSET=utf8;


#TEXTS
CREATE TABLE  `data`.`text` (
`tid` BIGINT UNSIGNED NOT NULL ,
`part` TINYINT UNSIGNED DEFAULT 1,
`title` VARCHAR( 64 ) ,
`text` TEXT NOT NULL ,
`date` TIMESTAMP NOT NULL ,
PRIMARY KEY (  `tid` )
) ENGINE = MYISAM DEFAULT CHARSET=utf8;


#CODES
CREATE TABLE `data`.`code` (
`id` BIGINT UNSIGNED NOT NULL ,
`file` VARCHAR(255) NOT NULL ,
PRIMARY KEY (  `id` )
) ENGINE = MYISAM DEFAULT CHARSET=utf8;


#COMMENTS
CREATE TABLE  `data`.`comments` (
`pid` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`id` BIGINT UNSIGNED NOT NULL ,
`uid` INT UNSIGNED NOT NULL ,
`time` TIMESTAMP NOT NULL ,
`comment` VARCHAR( 255 ) NOT NULL ,
INDEX (  `id` )
) ENGINE = MYISAM DEFAULT CHARSET=utf8;


CREATE DATABASE  `danmaku` ;

#DANMAKKU
CREATE TABLE  `danmaku`.`cmt#` (
`id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`stime` FLOAT UNSIGNED NOT NULL ,
`mode` TINYINT UNSIGNED NOT NULL ,
`size` TINYINT UNSIGNED NOT NULL ,#char(3)
`color` MEDIUMINT UNSIGNED NOT NULL ,
`date` TIMESTAMP NOT NULL ,
`message` VARCHAR( 4096 ) NOT NULL ,
`uid` INT UNSIGNED DEFAULT 0
) ENGINE = MYISAM DEFAULT CHARSET=utf8;




#==========DROP DATABASE(TESTING PURPOSES)==========
#DROP DATABASE ppl
#DROP DATABASE data
#DROP DATABASE danmaku




#=============== COMMANDS ===============

#insert data general data
#mysql_query("INSERT INTO `Handler` (`uid`, `title`, `media`, `category`, `tags`) VALUES ('123','test','vid','rand',null)");

#get max available id
/*
$exe = mysql_query("SELECT MAX(id) FROM `handler` LIMIT 1");
$high = mysql_fetch_array($exe);
echo $high[0];
*/
